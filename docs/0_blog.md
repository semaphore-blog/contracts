# Blogs

In a nutshell a blog is [`Semaphore Group`](https://docs.semaphore.pse.dev/guides/groups) with a `creator` and one or more `authors`.

Any Ethereum account can be a blog `creator`. Once a blog is created, the `creator` can generate invitiation codes to allow `authors` to join the the `Semaphore` group. Each `author` is a [`Semaphore Identity`](https://docs.semaphore.pse.dev/guides/identities).

## Creating a blog

In order to create a blog, any Ethereum account can call the following method on the `SemaphoreFactory` contract:

```solidity
function createGroup() external returns(uint256 groupId);
```

which will create a [`Semaphore Group`](https://docs.semaphore.pse.dev/guides/groups) and sets the `msg.sender` as the `creator` of the newly created group.

## Generating an invitation code

An invitation code is an [ERC-712](https://eips.ethereum.org/EIPS/eip-712) compliant signature generated by the blog `creator`. Once the invitation code (signature) is generated, the `creator` can use any off-chain mechanism to send it to anyone they want to invite as an author.

The author then needs to generate a [`Semaphore Identity`](https://docs.semaphore.pse.dev/guides/identities) and register it's `Identity Commitment` on-chain by providing a valid invitation code (signature) from the blog `creator`.

_note: the invitation code can only be used once_.

### The structure of the invitation signature

Just like any ERC-712 signature, there a two main components to the signature, `DOMAIN_SEPARATOR` and the `TYPEHASH`.

The domain separator is derived as below:

```solidity
    keccak256(
        abi.encode(
            keccak256(
                "EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)"
            ),
            keccak256("SemaphoreFactory"),
            keccak256("0.0.1"), // could change whenever the signature scheme changes
            block.chainid,
            address(this)
        )
    )
```

and the struct that actually get's hashed and signed (which is the invitation code that the `creator` shares) is as below:

```solidity
    struct Invitation {
        uint256 groupId; // semaphore groupId of the blog
        uint256 nonce;   // must be unique random number - signatures are invalidated based on nonce
        uint256 deadline;// timestamp after which the signature is not valid - 0 means always valid
    }
```

### Joining as author

After receiving an invitation code (which is simply a signature generated by the `creator` as described above), an `author` can join the blog's `Semaphore Group` by calling the following method on the `SemaphoreFactory` contract:

```solidity
    function joinWithInvitationCode(
        uint256 _groupId,
        uint256 _nonce,
        uint256 _deadline,
        uint256 _identityCommitment,
        uint8 _v,
        bytes32 _r,
        bytes32 _s
    ) external
```
